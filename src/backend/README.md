# POMODORK-BACKEND
PomodorkのBackend Api プロジェクト

## サーバー
### 環境変数
|Key|値|デフォルト値|内容|備考|
|---|---|---|---|---|
|DB_USER|`pomodork_dev`|-|DBのユーザ名|-|
|DB_PASSWORD|`developer`|-|DBのパスワード|-|
|DB_ADDRESS|`localhost`|-|DBのアドレス-|
|DB_PORT|`3306`|-|DBのユーザ名|-|
|DB_NAME|`pomodork_db`|-|DBのユーザ名|-|
|DB_TIMEZONE|`Asia/Tokyo`|-|DBのタイムゾーン|-|
|MAX_OPEN_CONNECTION|10|-|最大コネクション数<br>データベース側の接続数上限よりも少ない数にする|-|
|MAX_IDLE_CONNECTION|10|-|最大アイドルコネクション数<br>データベース側の接続数上限よりも少ない数にする|-|
|MAX_LIFE_TIME|60|-|コネクションの生存時間(ms)<br>確率したコネクションの最大生存時間|-|
|DEBUG_MODE|`0`|`0`|デバッグモード<br>`0`:デバッグモードなし、`1`:デバッグモード|-|

## API
|分類|メソッド|API名|Path|
|---|---|---|---|
|ユーザ管理|POST|ユーザ登録|`/v2/user`|
|ユーザ管理|GET|ユーザ取得|`/v2/user`|
|ユーザ管理|DELETE|ユーザ削除|`/v2/user`|
|アカウント管理|PUT|アカウント更新|`/v2/account`|
|アカウント管理|GET|アカウント取得|`/v2/account`|
|Twitter連携管理|POST|Twitter連携登録|`/v2/twitter/link`|
|Twitter連携管理|DELETE|Twitter連携解除|`/v2/twitter/link`|
|タスク管理|POST|タスク登録|`/v2/task`|
|タスク管理|PUT|タスク更新|`/v2/task`|
|タスク管理|GET|予定日タスク取得|`/v2/tasks/schedule`|
|タスク管理|GET|実績タスク取得|`/v2/tasks/actual`|

### エラーレスポンス
|API名|ステータスコード|エラーコード|エラーメッセージ|
|---|---|---|---|
|ユーザ登録|`500`|`E50001`|システムエラーが発生しました。|
|ユーザ取得|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|ユーザ取得|`500`|`E50001`|システムエラーが発生しました。|
|ユーザ削除|`500`|`E50001`|システムエラーが発生しました。|
|アカウント更新|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|アカウント更新|`500`|`E50001`|システムエラーが発生しました。|
|アカウント取得|`404`|`E40002`|アカウントが存在しません。メールアドレス=[pomodork@pomodork.com]|
|アカウント取得|`500`|`E50001`|システムエラーが発生しました。|
|Twitter連携登録|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|Twitter連携登録|`500`|`E50001`|システムエラーが発生しました。|
|Twitter連携解除|`500`|`E50001`|システムエラーが発生しました。|
|タスク登録|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|タスク登録|`500`|`E50001`|システムエラーが発生しました。|
|タスク更新|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|タスク更新|`500`|`E50001`|システムエラーが発生しました。|
|予定日タスク取得|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|予定日タスク取得|`500`|`E50001`|システムエラーが発生しました。|
|実績タスク取得|`404`|`E40001`|ユーザが存在しません。ユーザID=[MU99999999]|
|実績タスク取得|`500`|`E50001`|システムエラーが発生しました。|

### メッセージ
|API名|コード|メッセージ|
|---|---|---|
|-|`POME00001`|環境変数の取得に失敗しました。環境変数=[環境変数名]|
|-|`POME00002`|環境変数の変換に失敗しました。環境変数=[環境変数名], 環境変数値=[環境変数値]|
|-|`POME00003`|DBの接続に失敗しました。ホスト名=[ホスト名],データベース名=[データベース名],ポート=[ポート番号]|
|-|`POME00004`|サーバー起動に失敗しました。|
|-|`POMW00001`|環境変数の取得に失敗しました。デフォルト値を使用します。KEY=[KEY],デフォルト値=[デフォルト値]|
|-|`POMW00002`|環境変数の変換に失敗しました。デフォルト値を使用します。KEY=[KEY]],変換値=[変換値],デフォルト値=[デフォルト値]|
|-|`POMI00001`|環境変数を設定しました。KEY=[KEY], 設定値=[設定値]|
|ユーザ登録|`POME10001`|SQLの実行に失敗しました。テーブル名=[テーブル名],エラー=[エラー詳細]|
|ユーザ登録|`POME10002`|対象レコードが存在しません。テーブル名=[テーブル名],検索条件=[検索条件]|
|ユーザ登録|`POME10003`|登録内容が重複しています。テーブル名=[テーブル名],主キー=[主キー]|